#!/usr/bin/env ruby

require 'docopt'
require 'seize'

doc = 'Usage:
  seize list [--number=<value>]
  seize watch <channel> [--quality=<value>]
  seize check <channel>
  seize (-h | --help | --version)

Options:
  -h --help          Show this screen.
  --version          Show version.
  --number=<value>   Number of streams to list from 1-100. [default: 25]
  --quality=<value>  Livestreamer quality. [default: best]'

begin
  args = Docopt.docopt(doc, { version: Seize::VERSION })
  if args['watch']
    Seize.watch(args['<channel>'], args['--quality'])
  elsif args['list']
    Seize.list(args['--number'])
  elsif args['check']
    Seize.check(args['<channel>'])
  end
rescue Docopt::Exit => e
  puts e.message
end
